
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>MindCare</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  
  <link href="{% static 'assets/images/home.png' %}" rel="icon">
  <link href="{% static 'assets/home.png' %}" rel="apple-touch-icon">


 
  <link href="{% static 'assets/images/home.png' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/remixicon/remixicon.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>/* About Section Styling */
  /* Global Styles */
body {
    font-family: 'Poppins', sans-serif;
    color: #333;
    background-color: #f8f9fa; /* Soft white background */
    margin: 0;
    padding: 0;
}

/* Smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Header */
#header {
    background: #1f4870; /* Royal Blue */
    padding: 15px 0;
    transition: all 0.3s ease-in-out;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
}

#header .logo a {
    font-size: 1.8rem;
    font-weight: bold;
    color: white;
    text-decoration: none;
}

#header .navbar ul {
    list-style: none;
    display: flex;
    gap: 20px;
}

#header .navbar a {
    color: white;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s;
}

#header .navbar a:hover {
    color: #f8f9fa; /* Soft white */
}


/* Button Styling */
.btn-get-started {
    display: inline-block;
    background: white;
    color: #1f4870;
    padding: 12px 30px;
    font-size: 1.2rem;
    font-weight: bold;
    border-radius: 30px;
    transition: all 0.3s ease-in-out;
    text-decoration: none;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
}

.btn-get-started:hover {
    background: #f8f9fa;
    color: #1f4870;;
    transform: translateY(-3px);
    box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.3);
}

/* Remove unnecessary margins added by Google Translate */
body {
    top: 0px !important;
}
.goog-logo-link, .goog-te-gadget {
    display: none !important;
}
/* Hide Google Translate Toolbar */
.goog-te-banner-frame, .goog-te-gadget-simple, .goog-te-balloon-frame {
    display: none !important;
}

/* Remove Google Translate margin shift */
body {
    top: 0px !important;
}

/* About Section */
#about {
    background: linear-gradient(to right, #ffffff, #e3f2fd); /* Soft gradient */
    color: #222; /* Darker text for readability */
    padding: 80px 0;
    text-align: center;
    border-radius: 10px;
    position: relative;
    overflow: hidden;
}

/* About Section Title */
#about h2 {
    font-size: 2.8rem;
    font-weight: bold;
    color: #1f4870;;
    margin-bottom: 20px; /* Reduce spacing below the title */
    text-transform: capitalize;
}

/* Subtitle */
#about p.subtitle {
    font-size: 1.4rem;
    font-weight: 500;
    color: #444;
    max-width: 800px;
    margin: 0 auto 20px; /* Reduce bottom margin */
}



/* Left Text Content */
#about .text {
    flex: 1;
    font-size: 1.2rem;
    line-height: 1.8;
    color: #333;
}



#about .features li:hover {
    color: #1f4870;
    transform: translateX(5px);
    transition: all 0.3s ease-in-out;
}

#about .features li::before {
    content: "✔️";
    color: #1f4870;;
    font-size: 1.2rem;
    margin-right: 10px;
}
/* Adjust About Section Layout */
#about .row {
    display: flex;
    align-items: center;
    justify-content: space-between; /* Ensures spacing between text and image */
    flex-wrap: wrap;
}
/* Remove Bullets from Features List */
#about .features {
    list-style: none;
    padding: 0;
    margin: 20px 0;
}

/* Style Emoji Icons */
#about .features li {
    font-size: 1.1rem;
    color: #333;
    padding: 10px 0;
    display: flex;
    align-items: center;
}

#about .features li span {
    font-size: 1.5rem; /* Increase emoji size */
    margin-right: 10px;
    display: inline-flex;
    align-items: center;
}

/* Adjust Image Placement */
#about .about-img {
    width: 100%;
    max-width: 450px;
    border-radius: 15px;
    box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease-in-out;
    margin-left: 40px; /* Move image further to the right */
}

/* Responsive: Stack on smaller screens */
@media (max-width: 768px) {
    #about .row {
        flex-direction: column;
        text-align: center;
    }

    #about .about-img {
        margin-left: 0; /* Reset margin for small screens */
    }
}


#about .about-img:hover {
    transform: scale(1.05);
}

/* Call to Action Button */


#about .btn-learn-more {
    display: inline-block;
    background: #1f4870;
    color: white;
    padding: 12px 25px;
    font-size: 1.2rem;
    font-weight: bold;
    border-radius: 8px;
    transition: all 0.3s ease-in-out;
    text-decoration: none;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
}

#about .btn-learn-more:hover {
    background: #003f7f;
    transform: translateY(-2px);
}
.subtitle {
    font-style: italic;
    font-size: 1rem; /* Slightly smaller */
    color: #333;
    margin-top: -5px; /* Adjust spacing */
    line-height: 1.4; /* Improve readability */
}
.about-img {
    margin-left: 20px; /* Push image to the right */
    max-width: 460px; /* Slightly larger */
    margin-top: -50px;
}

.features li span {
    font-size: 1.3rem; /* Make emojis slightly bigger */
    margin-right: 10px; /* Add spacing */
}

/* Responsive Design */
@media (max-width: 768px) {
    #about h2 {
        font-size: 2.4rem;
    }

    #about p.lead {
        font-size: 1.2rem;
    }

    #about .row {
        flex-direction: column;
        text-align: center;
    }

    #about .text {
        text-align: center;
    }

    #about .btn-learn-more {
        font-size: 1rem;
        padding: 10px 20px;
    }
}

/* Services Section */
#services {
    background: #f8f9fa;
    padding: 80px 0;
    text-align: center;
}

#services h2 {
    font-size: 2.8rem;
    font-weight: bold;
    color: #1f4870;
    margin-bottom: 30px;
}

#services .icon-box {
    background: white;
    padding: 30px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease-in-out;
}

#services .icon-box:hover {
    transform: translateY(-5px);
    box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.2);
}

/* ======= Appointment Form Styling ======= */
.appointment-form {
    background: #f9f9f9; /* Light background for contrast */
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0px 5px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease-in-out;
    text-align: left;
}

/* Form Labels */
.appointment-form .form-label {
    font-weight: 600;
    color: #1f4870;
    margin-bottom: 5px;
}

/* Form Fields */
.appointment-form .form-control,
.appointment-form .form-select {
    border-radius: 6px;
    padding: 12px;
    border: 1px solid #ccc;
    width: 100%;
    transition: all 0.3s ease-in-out;
}

.appointment-form .form-control:focus,
.appointment-form .form-select:focus {
    border-color: #1f4870;
    box-shadow: 0px 0px 8px rgba(0, 64, 128, 0.2);
}

/* Textarea */
.appointment-form textarea {
    min-height: 100px;
    resize: vertical;
}

/* Booking Button */
.appointment-form button {
    background: #1f4870;
    color: #333;
    font-weight: bold;
    padding: 12px 20px;
    border-radius: 8px;
    transition: all 0.3s ease-in-out;
    border: none;
    width: 100%;
}

.appointment-form button:hover {
    background: #003f7f;
    color: white;
    transform: translateY(-2px);
}
/* Style Available Slots List */
#professionals ul {
    list-style: none; /* Removes bullet points */
    padding: 0;
    margin: 0;
}

#professionals ul li {
    font-size: 1.1rem;
    font-weight: 500;
    padding: 4px 0;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .appointment-form {
        padding: 15px;
    }

    .appointment-form .form-control,
    .appointment-form .form-select {
        padding: 10px;
    }
}


#custom-language-selector {
    display: flex;
    align-items: center;
    margin-left: 20px;
}

#language-dropdown {
    padding: 5px 10px;
    font-size: 14px;
    border-radius: 5px;
    border: 1px solid #ccc;
    background-color: white;
    color: #333;
    cursor: pointer;
}


</style>

</head>

<body>
  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center justify-content-between">

      <h1 class="logo"><a href="index.html">MindCare Burundi
      </a></h1>
      
      <nav id="navbar" class="navbar">
        <ul>
            <li><a class="nav-link scrollto active" href="#hero" data-translate>Home</a></li>
<li><a class="nav-link scrollto" href="#about" data-translate>About</a></li>
{% if user.is_authenticated %}
<li><a class="nav-link scrollto" href="#services" data-translate>Services</a></li>
<li><a class="nav-link scrollto" href="#professionals" data-translate>Help & Support</a></li>
{% endif %}
<li><a class="nav-link scrollto" href="#contact" data-translate>Contact</a></li>
<div id="google_translate_element"></div>

{% if user.is_authenticated %}
<li><a class="getstarted scrollto" href="logout" data-translate>Logout</a></li>
{% else %}
<li><a class="getstarted scrollto" href="login" data-translate>Login or Signup</a></li>
{% endif %}
<div id="custom-language-selector">
    <select id="language-dropdown" onchange="changeLanguage(this.value)">
        <option value="en">English</option>
        <option value="fr">Français</option>
        <option value="es">Español</option>
        <option value="sw">Swahili</option>
    </select>
</div>


        </div>
  </header><!-- End Header -->
  

  <section id="hero" class="d-flex align-items-center">
    <div class="container position-relative" data-aos="fade-up" data-aos-delay="100">
        <div class="row justify-content-center">
            <div class="col-xl-7 col-lg-9 text-center">
                {% if user.is_authenticated %}
                    <h1 data-translate>Welcome, {{user.username}}</h1>
                {% else %}
                    <h2 data-translate>We are a team that is dedicated to making Mental Health support accessible to everyone</h2>
                {% endif %}
            </div>
        </div>
        <div class="text-center">
            {% if user.is_authenticated %}
                <a href="#professionals" class="btn-get-started scrollto" data-translate>Get Support</a>
            {% else %}
                <a href="#about" class="btn-get-started scrollto" data-translate>Start Now</a>
            {% endif %}
        </div>
    </div>
</section>

  <main id="main">

   <!-- About Section -->
   <!-- About Section -->
<section id="about" class="about-section">
    <div class="container">
        <div class="section-title text-center">
            <h2 class="section-title animate__animated animate__fadeInDown" data-translate>
                About <span>Us</span>
            </h2>
            <p class="sub-text" data-translate>Empowering minds, transforming lives.</p>
        </div>

        <!-- Animated Sliding Container -->
        <div class="content-slider">
            <div class="content-slide active">
                <!-- Vision -->
                <div class="slide-box">
                    <h3><i class="fas fa-eye"></i> Our Vision</h3>
                    <p data-translate>
                        To create a world where mental health support is readily available, 
                        empowering individuals to lead fulfilling lives with emotional resilience.
                    </p>
                </div>
            </div>

            <div class="content-slide">
                <!-- Mission -->
                <div class="slide-box">
                    <h3><i class="fas fa-bullseye"></i> Our Mission</h3>
                    <p data-translate>
                        To provide a secure and user-friendly platform that connects individuals 
                        with mental health resources, professionals, and self-care tools to 
                        enhance their emotional and psychological well-being.
                    </p>
                </div>
            </div>

            <div class="content-slide">
                <!-- Key Features -->
                <div class="slide-box">
                    <ul class="features">
                        <li data-translate><i class="fas fa-clock"></i> <strong>24/7 Support:</strong> Get assistance anytime, anywhere.</li>
                        <li data-translate><i class="fas fa-user-md"></i> <strong>Personalized Guidance:</strong> Expert recommendations tailored to you.</li>
                        <li data-translate><i class="fas fa-heart"></i> <strong>Interactive Tools:</strong> Assessments, journaling, and self-care activities.</li>
                        <li data-translate><i class="fas fa-shield-alt"></i> <strong>Secure & Confidential:</strong> Your privacy and safety are our top priorities.</li>
                    </ul>
                </div>
            </div>

            <div class="content-slide">
                <!-- Call to Action -->
                <div class="slide-box cta-box">
                    <h3>Join Us Today!</h3>
                    <p class="join-us" data-translate>
                        Join <span class="highlight">thousands of users</span> who trust MindCare for their mental well-being.
                    </p>
                    <a href="{% url 'login' %}" class="btn-learn-more animate__animated animate__pulse" data-translate>Get Started</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Styles -->
<style>
    .about-section {
        background: linear-gradient(to right, #f9f9f9, #ffffff);
        padding: 80px 0;
        text-align: center;
        position: relative;
    }
    .section-title h2 {
        font-size: 3rem;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 20px;
    }
    .section-title .sub-text {
        font-size: 1.4rem;
        color: #555;
        margin-bottom: 30px;
    }
    .highlight {
        color: #1f4870;
        font-weight: bold;
    }
    
    /* Sliding Content */
    /* Heading styles */
.content-slide h1 {
    font-size: 3rem; /* Large and impactful */
    font-weight: 700; /* Bold for emphasis */
    color: #222; /* Slightly darker than body text */
    margin-bottom: 20px;
    text-transform: capitalize; /* Professional touch with consistent capitalization */
    letter-spacing: 0.5px; /* Slight spacing for elegance */
}

.content-slide h2 {
    font-size: 2.2rem;
    font-weight: 600;
    color: #555; /* Lighter gray for subheadings */
    margin-bottom: 15px;
}

/* Paragraph text styles */
.content-slide p {
    font-size: 1.2rem;
    font-weight: 400;
    margin-bottom: 25px;
    color: #666; /* Neutral gray that’s easy on the eyes */
}

/* Link styles */
.content-slide a {
    font-size: 1rem;
    color: #007BFF; /* Professional blue tone */
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s ease-in-out;
}

.content-slide a:hover {
    color: #0056b3; /* Slightly darker on hover */
}

/* Additional spacing and alignment */
.content-slide h1, .content-slide h2 {
    margin-top: 10px;
}

.content-slide p + p {
    margin-top: 15px;
}
    /* Sliding Content */
.content-slider {
    display: flex;
    width: 100%;
    max-width: 1200px;
    overflow: hidden;
    position: relative;
    margin: auto;
    height: 400px;
}

.content-slide {
    min-width: 100%;
    opacity: 0;
    transform: translateX(-100%); /* Start off-screen to the right */
    transition: transform 1s ease-in-out, opacity 1s ease-in-out;
    position: absolute;
    left: 0;
    right: 0;
    height: 100%;
    font-size: 1.5rem;
    padding: 20px;
}

.content-slide.active {
    opacity: 1;
    transform: translateX(0); /* Move into the visible area */
}

    
    /* Slide Box */
    .slide-box {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.15);
        text-align: center;
        width: 80%;
        margin: auto;
        height: 80%;
    }
    .slide-box h3 {
        color: #1f4870;
        font-size: 2rem;
        margin-bottom: 15px;
    }
    
    /* Features */
    .features {
        list-style: none;
        padding: 0;
        font-size: 1.2rem;
    }
    .features li {
        display: flex;
        align-items: center;
        margin: 10px 0;
        font-size: 1.2rem;
    }
    .features li i {
        color: #1f4870;
        margin-right: 10px;
        font-size: 1.5rem;
    }

    /* CTA Button */
    .btn-learn-more {
        display: inline-block;
        background: #1f4870;
        color: white;
        padding: 14px 24px;
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease-in-out;
        font-size: 1.3rem;
        font-weight: bold;
    }
    .btn-learn-more:hover {
        background: #16a085;
        transform: scale(1.1);
    }

</style>

<!-- Auto-Sliding Sections -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let slides = document.querySelectorAll(".content-slide");
        let currentIndex = 0;

        function showNextSlide() {
            slides[currentIndex].classList.remove("active");
            currentIndex = (currentIndex + 1) % slides.length;
            slides[currentIndex].classList.add("active");
        }

        setInterval(showNextSlide, 5000); // Change section every 5 seconds
    });
</script>

<!-- Include Animation Library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <section id="services" class="services section-bg">
    <div class="container" data-aos="fade-up">
        <div class="section-title">
            <h2 data-translate>Features</h2>
            <p data-translate>We aim to make mental health support accessible and empowering for all.</p>
        </div>

        <div class="row">
            <div class="col-lg-4 col-md-6 d-flex align-items-stretch" data-aos="zoom-in" data-aos-delay="100">
                <div class="icon-box iconbox-blue">
                    <div class="icon">
                        <i class="bx bxl-dribbble"></i>
                    </div>
                    <h4><a  data-translate>Personalized Mental Health Support</a></h4>
                    <p data-translate>MindCare adapts to your needs by offering personalized mental health strategies based on your emotions, lifestyle, and mental wellness goals.</p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 d-flex align-items-stretch mt-4 mt-md-0" data-aos="zoom-in" data-aos-delay="200">
                <div class="icon-box iconbox-orange">
                    <div class="icon">
                        <i class="bx bx-file"></i>
                    </div>
                    <h4><a data-translate>Community-Oriented</a></h4>
                    <p data-translate>A supportive community to share experiences, gain insights, and uplift each other on your wellness journey. .</p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 d-flex align-items-stretch mt-4 mt-lg-0" data-aos="zoom-in" data-aos-delay="300">
                <div class="icon-box iconbox-pink">
                    <div class="icon">
                        <i class="bx bx-tachometer"></i>
                    </div>
                    <h4><a href="training_materials" data-translate>Interactive & Engaging Content</a></h4>
                    <p data-translate>MindCare provides interactive exercises, thought-provoking prompts, engaging challenges, and self-reflection activities to enhance mental well-being.</p>
                </div>
            </div>
        </div>
    </div>
</section>


          
<!-- Professionals Section -->
<section id="professionals" class="professionals">
  <div class="container" data-aos="fade-up">
    <div class="section-title">
      <h2 data-translate>Meet Our Professionals</h2>
      <p data-translate>Connect with experienced mental health professionals ready to support you.</p>
    </div>

    <div class="row">
      {% for professional in professionals %}
      <div class="col-lg-4 col-md-6 d-flex align-items-stretch">
        <div class="member">
          {% if professional.image %}
            <img src="{{ professional.image.url }}" class="img-fluid" alt="{{ professional.name }}">
          {% else %}
            <img src="{% static 'assets/images/default.png' %}" class="img-fluid" alt="Default Image">
          {% endif %}

          <h4><a href="{% url 'professional_detail' professional.id %}">{{ professional.name }}</a></h4>
          <p>{{ professional.specialty }}</p>

          {% if user.is_authenticated %}
          <p data-translate><strong>Available Slots:</strong></p>
<ul id="available-slots-{{ professional.id }}">
  {% for slot in professional.available_slots %}
    {% if slot not in professional.booked_slots %}  {# ✅ Hide booked slots #}
      <li><span style="color: green;">{{ slot }}</span></li>
    {% endif %}
  {% empty %}
    <p class="text-muted">No available slots</p>
  {% endfor %}
</ul>

<button class="btn btn-primary book-appointment-btn" 
data-professional-id="{{ professional.id }}" 
data-professional-name="{{ professional.name }}" 
data-specialty="{{ professional.specialty }}"
data-available-slots="{{ professional.available_slots|join:',' }}"
data-booked-slots="{{ professional.booked_slots|join:',' }}">  <!-- ✅ Add booked slots -->
Book Appointment
</button>

          {% endif %}
        </div>
      </div>
      {% empty %}
      <p class="text-center">No professionals available at the moment.</p>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Appointment Booking Modal -->
<div id="appointment-modal" class="modal fade" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Book Appointment</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="appointment-form">
          {% csrf_token %}
          <input type="hidden" name="professional" id="modal-professional-id">

          <p>Booking with: <strong id="modal-professional-name"></strong></p>
          <p>Specialty: <span id="modal-specialty"></span></p>

          <div class="mb-3">
            <label for="date" class="form-label">Select Date:</label>
            <input type="date" class="form-control" name="date" id="appointment-date" required>
          </div>

          <div class="mb-3">
            <label for="time" class="form-label">Select Time:</label>
            <select class="form-select" name="time" id="appointment-time" required>
            </select>
          </div>

          <div class="mb-3">
            <label for="reason" class="form-label">Reason:</label>
            <textarea class="form-control" name="reason" placeholder="Enter appointment reason" required></textarea>
          </div>

          <button type="submit" class="btn btn-primary w-100">Confirm Appointment</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Success Message -->
<div id="success-popup" style="display: none; background: green; color: white; padding: 15px; position: fixed; top: 20px; right: 20px; border-radius: 5px; z-index: 1000;">
  Appointment confirmed! A Google Meet link has been sent to your email.  
  <br>
  <a id="meet-link" href="#" style="color: yellow; font-weight: bold;" target="_blank"></a>
</div>

<!-- JavaScript for Modal & AJAX Booking -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    let today = new Date().toISOString().split("T")[0];
    document.getElementById("appointment-date").setAttribute("min", today);

    document.querySelectorAll(".book-appointment-btn").forEach(button => {
        button.addEventListener("click", function () {
            let professionalId = this.getAttribute("data-professional-id");
            let professionalName = this.getAttribute("data-professional-name");
            let specialty = this.getAttribute("data-specialty");
            let availableSlots = this.getAttribute("data-available-slots").split(",");

            document.getElementById("modal-professional-id").value = professionalId;
            document.getElementById("modal-professional-name").textContent = professionalName;
            document.getElementById("modal-specialty").textContent = specialty;

            let timeSelect = document.getElementById("appointment-time");
            timeSelect.innerHTML = "";
            availableSlots.forEach(slot => {
                if (slot.trim() !== "") {
                    let option = document.createElement("option");
                    option.value = slot;
                    option.textContent = slot;
                    timeSelect.appendChild(option);
                }
            });

            let modalElement = document.getElementById("appointment-modal");
let modalInstance = new bootstrap.Modal(modalElement);
modalInstance.show();

        });
    });

    document.getElementById("appointment-form").addEventListener("submit", function (event) {
        event.preventDefault();

        let formData = new FormData(this);
        let professionalId = formData.get("professional");
        let selectedSlot = formData.get("time");
        let submitButton = this.querySelector("button[type='submit']");
        
        submitButton.disabled = true;
        submitButton.textContent = "Booking...";

        fetch("{% url 'book_appointment' %}", {
            method: "POST",
            body: formData,
            headers: {
                "X-CSRFToken": document.querySelector("[name=csrfmiddlewaretoken]").value
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.message) {
                let meetLink = data.google_meet_link;
                document.getElementById("success-popup").style.display = "block";
                document.getElementById("meet-link").href = meetLink;
                document.getElementById("meet-link").textContent = "Join Google Meet";

                setTimeout(() => document.getElementById("success-popup").style.display = "none", 5000);

                let slotList = document.getElementById(`available-slots-${professionalId}`);
                if (slotList) {
                    let slotElements = slotList.querySelectorAll("li");
                    slotElements.forEach(li => {
                        if (li.textContent.trim() === selectedSlot) {
                            li.remove();
                        }
                    });
                }

                document.getElementById("appointment-form").reset();
            }
        })
        .catch(error => {
            console.error("Error booking appointment:", error);
            alert("Error booking appointment. Please try again.");
        })
        .finally(() => {
            submitButton.disabled = false;
            submitButton.textContent = "Confirm Appointment";
        });
    });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    let today = new Date().toISOString().split("T")[0];
    document.getElementById("appointment-date").setAttribute("min", today);

    document.querySelectorAll(".book-appointment-btn").forEach(button => {
        button.addEventListener("click", function () {
            let professionalId = this.getAttribute("data-professional-id");
            let professionalName = this.getAttribute("data-professional-name");
            let specialty = this.getAttribute("data-specialty");
            
            let availableSlots = this.getAttribute("data-available-slots") ? this.getAttribute("data-available-slots").split(",") : [];
            let bookedSlots = this.getAttribute("data-booked-slots") ? this.getAttribute("data-booked-slots").split(",") : [];

            // ✅ Filter out booked slots from available slots
            let filteredSlots = availableSlots.filter(slot => !bookedSlots.includes(slot.trim()));

            document.getElementById("modal-professional-id").value = professionalId;
            document.getElementById("modal-professional-name").textContent = professionalName;
            document.getElementById("modal-specialty").textContent = specialty;

            let timeSelect = document.getElementById("appointment-time");
            timeSelect.innerHTML = "";

            if (filteredSlots.length === 0) {
                let option = document.createElement("option");
                option.textContent = "No available slots";
                option.disabled = true;
                option.selected = true;
                timeSelect.appendChild(option);
            } else {
                filteredSlots.forEach(slot => {
                    let option = document.createElement("option");
                    option.value = slot.trim();
                    option.textContent = slot.trim();
                    timeSelect.appendChild(option);
                });
            }

            let modal = new bootstrap.Modal(document.getElementById("appointment-modal"));
            modal.show();
        });
    });

    // ✅ Prevent Page Refresh After Booking
    document.getElementById("appointment-form").addEventListener("submit", function (event) {
        event.preventDefault();

        let formData = new FormData(this);
        let professionalId = formData.get("professional");
        let selectedSlot = formData.get("time");
        let submitButton = this.querySelector("button[type='submit']");

        submitButton.disabled = true;
        submitButton.textContent = "Booking...";

        fetch("{% url 'book_appointment' %}", {
            method: "POST",
            body: formData,
            headers: {
                "X-CSRFToken": document.querySelector("[name=csrfmiddlewaretoken]").value
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.message) {
                let meetLink = data.google_meet_link;

                // ✅ Keep the Success Popup Visible
                let successPopup = document.getElementById("success-popup");
                successPopup.style.display = "block";
                document.getElementById("meet-link").href = meetLink;
                document.getElementById("meet-link").textContent = "Join Google Meet";

                // ✅ Properly Hide the Modal
                let modalElement = document.getElementById("appointment-modal");
                let modalInstance = bootstrap.Modal.getInstance(modalElement);
                if (modalInstance) {
                    modalInstance.hide();
                }

                // ✅ Remove the Bootstrap backdrop overlay (Fixes gray screen issue)
                document.querySelectorAll(".modal-backdrop").forEach(backdrop => {
                    backdrop.remove();
                });

                // ✅ Ensure the body scrolls normally after closing the modal
                document.body.classList.remove("modal-open");

                // ✅ Reset the Form
                document.getElementById("appointment-form").reset();
            }
        })
        .catch(error => {
            console.error("Error booking appointment:", error);
            alert("Error booking appointment. Please try again.");
        })
        .finally(() => {
            submitButton.disabled = false;
            submitButton.textContent = "Confirm Appointment";
        });
    });
});

</script>

  <!-- Success and Error Message Display (Django Messages Framework) -->
  {% if messages %}
  <div>
      {% for message in messages %}
          <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-danger{% endif %}">
              {{ message }}
          </div>
      {% endfor %}
  </div>
{% endif %}

<!-- Success Popup -->
<div id="success-popup">Message sent successfully!</div>
    <!-- Contact Section -->
    <section id="contact" class="contact">
      <div class="container" data-aos="fade-up">
          <div class="section-title">
            <h2 data-translate>Contact</h2>
          </div>
          <style>
            .alert-success {
                background-color: green;
                color: white;
                padding: 10px;
                margin-bottom: 10px;
            }
            .alert-danger {
                background-color: red;
                color: white;
                padding: 10px;
                margin-bottom: 10px;
            }
            .alert-info {
                background-color: #1f4870;
                color: white;
                padding: 10px;
                margin-bottom: 10px;
            }
            #success-popup {
            display: none;
            background: green;
            color: white;
            padding: 15px;
            position: fixed;
            top: 20px;
            right: 20px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            width: auto;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
        }
    </style>
          <div class="row mt-5">
              <div class="col-lg-4">
                  <div class="info">
                      <div class="address">
                          <i class="bi bi-geo-alt"></i>
                          <h4 data-translate>Location:</h4>
                          <p>Bibare, Kimironko, Rwanda</p>
                      </div>
                      <div class="email">
                          <i class="bi bi-envelope"></i>
                          <h4 data-translate>Email:</h4>
                          <p>nshimirimanaerica@gmail.com</p>
                      </div>
                      <div class="phone">
                          <i class="bi bi-phone"></i>
                          <h4 data-translate>Call:</h4>
                          <p>+250790135783</p>
                      </div>
                  </div>
              </div>
              
              <div class="col-lg-8 mt-5 mt-lg-0">
                  <form id="contact-form" action="{% url 'contact' %}" method="post" role="form" class="php-email-form">
                      {% csrf_token %}
                      <input type="text" name="name" class="form-control" placeholder="Your Name" required>
                      <input type="email" name="email" class="form-control" placeholder="Your Email" required>
                      <input type="text" name="subject" class="form-control" placeholder="Subject" required>
                      <textarea name="message" class="form-control" rows="5" placeholder="Message" required></textarea>
                      <button type="submit" data-translate>Send Message</button>

                  </form>
              </div>
          </div>
      </div>
  </section>
  
  <!-- JavaScript to Handle Popup Display -->
  <script>
  document.addEventListener("DOMContentLoaded", function () {
      const contactForm = document.getElementById("contact-form");
      const successPopup = document.getElementById("success-popup");

      if (!contactForm) {
          console.error("❌ Error: contact-form not found in HTML!");
          return;
      }

      if (!successPopup) {
          console.error("❌ Error: success-popup div is missing in the HTML!");
          return;
      }

      contactForm.addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent default form submission
          let formData = new FormData(this);

          fetch(this.action, {
              method: "POST",
              body: formData,
              headers: { "X-Requested-With": "XMLHttpRequest" }
          })
          .then(response => response.json())
          .then(data => {
              if (data.message) {
                  console.log("✅ Popup should appear now!");
                  successPopup.innerText = data.message;
                  successPopup.style.display = "block";
                  setTimeout(() => {
                      successPopup.style.display = "none";
                      contactForm.reset();
                  }, 3000);
              } else {
                  console.error("❌ Unexpected response:", data);
              }
          })
          .catch(error => {
              console.error("❌ Fetch Error:", error);
              alert("An error occurred. Please try again.");
          });
      });
  });
  </script>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6 footer-contact">
            <h3>MindCare Burundi</h3>
            <p>
              Bibare <br>
              Kimironko<br>
              Kigali <br><br>
              <strong>Phone:</strong> +250790135783<br>
              <strong>Email:</strong> nshimirimanaerica@gmail.com<br>
            </p>
          </div>

          

    <div class="container d-md-flex py-4">

      <div class="me-md-auto text-center text-md-start">
        <div class="copyright">
          
    <p>&copy; 2023 Mental health support platform</p>
        </div>
        <div class="credits">
          
          Designed by <a href="https://bootstrapmade.com/">Erica</a>
        </div>
      </div>
      <div class="social-links text-center text-md-right pt-3 pt-md-0">
        <a href="#" class="https://twitter.com/home?lang=en"><i class="bx bxl-twitter"></i></a>
        <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
        <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
        <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
        <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
      </div>
    </div>
    <div id="google_translate_element" style="display: none;"></div>

  </footer><!-- End Footer -->

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
  <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>
  <script>
    function saveLanguage(language) {
        localStorage.setItem("selectedLanguage", language);
        document.cookie = "language=" + language + ";path=/";
    }

    function getSavedLanguage() {
        let savedLang = localStorage.getItem("selectedLanguage");
        let cookieLang = document.cookie.split("; ").find(row => row.startsWith("language="));
        return savedLang || (cookieLang ? cookieLang.split("=")[1] : "en");
    }

    document.addEventListener("DOMContentLoaded", function () {
        let savedLanguage = getSavedLanguage();
        document.getElementById("language-selector").value = savedLanguage;
        translatePage(savedLanguage, true);
    });

    function getCSRFToken() {
        let csrfToken = document.cookie.split("; ").find(row => row.startsWith("csrftoken="));
        return csrfToken ? csrfToken.split("=")[1] : "";
    }

    function translatePage() {
    let selectedLanguage = document.getElementById("language-selector").value;
    let elements = document.querySelectorAll("[data-translate]");

    if (!selectedLanguage) {
        alert("Please select a language first!");
        return;
    }

    let texts = [];
    elements.forEach(element => texts.push(element.textContent.trim()));

    console.log("📢 Sending for translation:", texts); // ✅ Debugging: Check what's being sent

    let textArray = texts.join("|");

    fetch("/translate/", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            "X-CSRFToken": getCSRFToken()
        },
        body: new URLSearchParams({
            "text": textArray,
            "language": selectedLanguage
        })
    })
    .then(response => response.json())
    .then(data => {
        console.log("✅ Translation API Response:", data); // ✅ Debugging: Check response

        if (data.translated_text) {
            let translatedTexts = data.translated_text.split("|");

            elements.forEach((element, index) => {
                console.log("🔄 Replacing:", element.textContent, "➡", translatedTexts[index]); // ✅ Debugging
                element.textContent = translatedTexts[index] || element.textContent;
            });
        } else {
            console.error("❌ Translation error:", data.error);
        }
    })
    .catch(error => console.error("❌ Translation failed:", error));
}

</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        setTimeout(function () {
            var bannerFrame = document.querySelector(".goog-te-banner-frame");
            if (bannerFrame) {
                bannerFrame.style.display = "none";
            }
        }, 1000); // Delay to allow the frame to load before hiding it
    });
    </script>
    
    </script>
    <script>function getCSRFToken() {
        let csrfToken = document.cookie.split("; ").find(row => row.startsWith("csrftoken="));
        return csrfToken ? csrfToken.split("=")[1] : "";
    }
    </script>
<script>
    function changeLanguage(selectedLang) {
        localStorage.setItem("selectedLanguage", selectedLang);
        document.cookie = "language=" + selectedLang + ";path=/";
    
        // Wait until Google Translate is fully loaded
        let googleTranslateFrame = document.querySelector(".goog-te-combo");
        if (googleTranslateFrame) {
            googleTranslateFrame.value = selectedLang;
            googleTranslateFrame.dispatchEvent(new Event("change"));
        } else {
            console.warn("Google Translate not initialized yet. Retrying...");
            setTimeout(() => changeLanguage(selectedLang), 500);
        }
    }
    
    // Ensure the saved language is applied when the page loads
    document.addEventListener("DOMContentLoaded", function () {
        let savedLanguage = localStorage.getItem("selectedLanguage") || "en";
        document.getElementById("language-dropdown").value = savedLanguage;
        changeLanguage(savedLanguage);
    });
    </script>
    
</script>
<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'en',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
            autoDisplay: false  // ✅ Prevents automatic toolbar from showing
        }, 'google_translate_element');
    }
    </script>
    
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement(
                { pageLanguage: 'en', autoDisplay: false }, 
                'google_translate_element'
            );
        }
        </script>
        
    
<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>

</html>
